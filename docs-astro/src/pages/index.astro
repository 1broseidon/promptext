---
import { Icon } from '@astrojs/starlight/components';

const features = [
  {
    title: "Smart Filtering",
    description: "Automatically excludes node_modules, lock files, and build artifacts. Respects .gitignore patterns.",
    icon: "puzzle"
  },
  {
    title: "Relevance Scoring",
    description: "Ranks files by keyword matches in names, paths, and content. Get the most relevant code first.",
    icon: "star"
  },
  {
    title: "Token Budget",
    description: "Set hard limits on token count. Automatically excludes lower-priority files to stay within budget.",
    icon: "warning"
  },
  {
    title: "Accurate Counting",
    description: "Uses tiktoken cl100k_base tokenizer. Compatible with GPT-4, GPT-3.5, and Claude models.",
    icon: "information"
  },
  {
    title: "Multiple Formats",
    description: "PTX (default), TOON (30-60% savings), Markdown, or XML. Auto-detect from file extension.",
    icon: "document"
  },
  {
    title: "Lightning Fast",
    description: "Written in Go. Processes thousands of files in seconds. Zero dependencies after install.",
    icon: "rocket"
  }
];
---

<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>promptext - Smart code context for AI assistants</title>
  <meta name="description" content="Transform your codebase into AI-ready context. Fast, token-efficient, smart filtering.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #000000;
      --text: #FFFFFF;
      --text-muted: rgba(255, 255, 255, 0.6);
      --accent: #FFFFFF;
      --border: rgba(255, 255, 255, 0.08);
      --code-bg: #0A0A0A;
      --green: #10B981;

      --space-xs: 8px;
      --space-sm: 16px;
      --space-md: 24px;
      --space-lg: 32px;
      --space-xl: 48px;
      --space-2xl: 64px;
      --space-3xl: 96px;
      --space-4xl: 128px;
    }

    html[data-theme="light"] {
      --bg: #FFFFFF;
      --text: #000000;
      --text-muted: rgba(0, 0, 0, 0.6);
      --accent: #10B981;
      --border: rgba(0, 0, 0, 0.08);
      --code-bg: #FAFAFA;
      --green: #059669;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.7;
      letter-spacing: -0.01em;
      overflow-x: hidden;
    }

    ::selection {
      background: rgba(255, 255, 255, 0.1);
    }

    /* Navigation */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 var(--space-lg);
    }

    html[data-theme="light"] nav {
      background: rgba(255, 255, 255, 0.9);
    }

    .logo {
      font-weight: 600;
      font-size: 1.25rem;
      letter-spacing: -0.02em;
      text-decoration: none;
      color: var(--text);
    }

    .nav-links {
      display: flex;
      gap: var(--space-lg);
      align-items: center;
    }

    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.9375rem;
      transition: color 0.2s;
    }

    .nav-links a:hover {
      color: var(--text);
    }

    .theme-toggle {
      background: none;
      border: 1px solid var(--border);
      color: var(--text);
      padding: var(--space-xs) var(--space-sm);
      cursor: pointer;
      font-family: inherit;
      font-size: 0.9375rem;
      transition: all 0.2s;
    }

    .theme-toggle:hover {
      border-color: var(--accent);
    }

    /* Hero Section */
    .hero {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-2xl) var(--space-lg) var(--space-xl);
      margin-top: 56px;
    }

    .hero-content {
      max-width: 1200px;
      width: 100%;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-3xl);
      align-items: stretch;
    }

    .hero-text {
      max-width: 540px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: 100%;
    }

    .hero h1 {
      font-size: clamp(2.5rem, 5vw, 3.5rem);
      font-weight: 700;
      letter-spacing: -0.04em;
      line-height: 1.1;
      margin-bottom: var(--space-sm);
    }

    .hero p {
      font-size: clamp(1.125rem, 2vw, 1.25rem);
      color: var(--text-muted);
      margin-bottom: var(--space-lg);
    }

    /* Install Command Section */
    .install-section {
      margin-bottom: var(--space-lg);
    }

    /* Controls Row */
    .controls-row {
      display: flex;
      gap: var(--space-sm);
      margin-bottom: var(--space-sm);
      align-items: stretch;
    }

    /* OS Selector - Segmented Control */
    .os-selector {
      display: inline-flex;
      background: var(--code-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 4px;
      position: relative;
      flex-shrink: 0;
    }

    .os-selector-bg {
      position: absolute;
      top: 4px;
      height: calc(100% - 8px);
      background: var(--accent);
      border-radius: 6px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0.1;
    }

    html[data-theme="light"] .os-selector-bg {
      background: var(--accent);
      opacity: 1;
    }

    .os-option {
      position: relative;
      z-index: 1;
      padding: var(--space-xs) var(--space-sm);
      background: none;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      font-family: 'Inter', sans-serif;
      font-size: 0.875rem;
      font-weight: 500;
      transition: color 0.2s;
      border-radius: 6px;
      white-space: nowrap;
    }

    .os-option:hover {
      color: var(--text);
    }

    .os-option.active {
      color: var(--text);
    }

    html[data-theme="light"] .os-option.active {
      color: var(--bg);
    }

    .os-option svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    .os-label {
      display: none;
    }

    @media (min-width: 480px) {
      .os-label {
        display: inline;
      }
    }

    /* Docs Link Button */
    .docs-link {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-sm);
      background: transparent;
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-muted);
      text-decoration: none;
      font-family: 'Inter', sans-serif;
      font-size: 0.875rem;
      font-weight: 500;
      transition: all 0.2s;
    }

    .docs-link:hover {
      color: var(--text);
      border-color: var(--accent);
      background: rgba(255, 255, 255, 0.05);
    }

    .docs-link svg {
      width: 16px;
      height: 16px;
    }

    /* Install Command */
    .install-command {
      display: flex;
      align-items: center;
      background: var(--code-bg);
      border: 1px solid var(--border);
      padding: var(--space-sm) var(--space-md);
      font-family: 'JetBrains Mono', 'SF Mono', Monaco, monospace;
      font-size: 0.9375rem;
      transition: all 0.2s;
      gap: var(--space-sm);
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }

    .install-command::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .install-command:hover::before {
      transform: translateX(100%);
    }

    .install-command:hover {
      border-color: rgba(255, 255, 255, 0.2);
    }

    .command-text {
      flex: 1;
      color: var(--text);
      user-select: all;
      font-family: inherit;
      font-size: inherit;
      background: none;
      border: none;
      outline: none;
      padding: 0;
    }

    .copy-btn {
      flex-shrink: 0;
      background: transparent;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      padding: var(--space-xs);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      border-radius: 6px;
      position: relative;
    }

    .copy-btn:hover {
      color: var(--text);
      background: rgba(255, 255, 255, 0.05);
    }

    .copy-btn.copied {
      color: var(--green);
    }

    .copy-btn svg {
      width: 20px;
      height: 20px;
    }

    .cta-buttons {
      display: flex;
      gap: var(--space-md);
      margin-bottom: 0;
      flex-wrap: wrap;
    }

    .btn {
      padding: var(--space-sm) var(--space-lg);
      font-size: 1rem;
      font-weight: 500;
      text-decoration: none;
      border: 1px solid var(--border);
      transition: all 0.2s;
      cursor: pointer;
      font-family: inherit;
      display: inline-block;
    }

    .btn-primary {
      background: var(--text);
      color: var(--bg);
      border-color: var(--text);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 16px rgba(255, 255, 255, 0.1);
    }

    .btn-secondary {
      background: transparent;
      color: var(--text);
    }

    .btn-secondary:hover {
      border-color: var(--accent);
    }

    /* Terminal */
    .terminal-window {
      background: var(--code-bg);
      border: 1px solid var(--border);
      font-family: 'JetBrains Mono', 'SF Mono', Monaco, monospace;
      font-size: 0.875rem;
      line-height: 1.6;
      position: relative;
      height: 450px;
      display: flex;
      flex-direction: column;
    }

    .terminal-header {
      background: rgba(255, 255, 255, 0.03);
      border-bottom: 1px solid var(--border);
      padding: var(--space-sm) var(--space-md);
      display: flex;
      align-items: center;
      gap: var(--space-xs);
    }

    .terminal-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--text-muted);
      opacity: 0.3;
    }

    .terminal-body {
      padding: var(--space-md);
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      min-height: 0;
    }

    .terminal-line {
      display: flex;
      margin-bottom: var(--space-xs);
      opacity: 0;
      animation: fadeIn 0.3s forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; }
    }

    .prompt {
      color: var(--green);
      margin-right: var(--space-xs);
      user-select: none;
      flex-shrink: 0;
    }

    .cursor {
      display: inline-block;
      width: 8px;
      height: 18px;
      background: var(--text);
      margin-left: 2px;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .output {
      color: var(--text-muted);
      margin: var(--space-sm) 0;
      line-height: 1.6;
    }

    .output div {
      min-height: 1.6em;
    }

    .success {
      color: var(--green);
    }

    .warning {
      color: #FFA500;
    }

    .terminal-box {
      color: var(--green);
      margin: var(--space-sm) 0;
      line-height: 1.4;
      font-family: inherit;
      display: inline-block;
      min-width: 0;
    }

    .terminal-box-top,
    .terminal-box-bottom {
      user-select: none;
      line-height: 1;
    }

    .terminal-box-line {
      display: flex;
      align-items: stretch;
      line-height: 1.4;
      white-space: nowrap;
    }

    .terminal-box-border {
      user-select: none;
      flex-shrink: 0;
    }

    .terminal-box-content {
      flex: 1;
      min-width: 0;
      white-space: pre;
    }

    /* Features Section */
    .features {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--space-lg) var(--space-lg) var(--space-3xl);
    }

    .section-title {
      font-size: clamp(1.75rem, 3vw, 2.5rem);
      font-weight: 700;
      letter-spacing: -0.03em;
      margin-bottom: var(--space-sm);
      text-align: center;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: var(--space-lg);
    }

    .feature-card {
      border: 1px solid var(--border);
      padding: var(--space-lg);
      transition: all 0.2s;
    }

    .feature-card:hover {
      border-color: var(--accent);
      transform: translateY(-4px);
    }

    .feature-card h3 {
      font-size: 1.25rem;
      font-weight: 600;
      letter-spacing: -0.02em;
      margin-bottom: var(--space-sm);
    }

    .feature-card p {
      color: var(--text-muted);
      font-size: 0.9375rem;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--border);
      padding: var(--space-xl) var(--space-lg);
      text-align: center;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    footer a {
      color: var(--text);
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* Responsive */
    @media (max-width: 968px) {
      .hero-content {
        grid-template-columns: 1fr;
        gap: var(--space-2xl);
      }

      .hero-text {
        max-width: 100%;
      }
    }

    @media (max-width: 768px) {
      nav {
        padding: 0 var(--space-md);
      }

      .hero {
        padding: var(--space-2xl) var(--space-md);
      }

      .install-command {
        font-size: 0.75rem;
        padding: var(--space-sm);
        gap: var(--space-xs);
      }

      .os-icon {
        width: 30px;
        height: 30px;
      }

      .os-icon svg {
        width: 8px;
        height: 8px;
      }

      .cta-buttons {
        flex-direction: column;
      }

      .btn {
        text-align: center;
      }

      .feature-grid {
        grid-template-columns: 1fr;
      }

      .terminal-body {
        font-size: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <nav>
    <a href="/" class="logo">promptext</a>
    <div class="nav-links">
      <a href="/getting-started">Documentation</a>
      <a href="https://github.com/1broseidon/promptext" target="_blank">GitHub</a>
      <button class="theme-toggle" id="themeToggle">Toggle Theme</button>
    </div>
  </nav>

  <section class="hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1>Turn your codebase into AI-ready context</h1>
        <p>Smart filtering, relevance scoring, and token budgets. Extract only what matters.</p>

        <!-- OS-specific install command -->
        <div class="install-section">
          <!-- Controls Row -->
          <div class="controls-row">
            <!-- OS Selector -->
            <div class="os-selector" id="osSelector">
              <div class="os-selector-bg" id="osSelectorBg"></div>
              <button class="os-option" data-os="mac">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 22 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.09997 22C7.78997 22.05 6.79997 20.68 5.95997 19.47C4.24997 17 2.93997 12.45 4.69997 9.39C5.56997 7.87 7.12997 6.91 8.81997 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.1 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"/>
                </svg>
                <span class="os-label">macOS</span>
              </button>
              <button class="os-option" data-os="linux">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139zm.529 3.405h.013c.213 0 .396.062.584.198.19.135.33.332.438.533.105.259.158.459.166.724 0-.02.006-.04.006-.06v.105a.086.086 0 01-.004-.021l-.004-.024a1.807 1.807 0 01-.15.706.953.953 0 01-.213.335.71.71 0 00-.088-.042c-.104-.045-.198-.064-.284-.133a1.312 1.312 0 00-.22-.066c.05-.06.146-.133.183-.198.053-.128.082-.264.088-.402v-.02a1.21 1.21 0 00-.061-.4c-.045-.134-.101-.2-.183-.333-.084-.066-.167-.132-.267-.132h-.016c-.093 0-.176.03-.262.132a.8.8 0 00-.205.334 1.18 1.18 0 00-.09.4v.019c.002.089.008.179.02.267-.193-.067-.438-.135-.607-.202a1.635 1.635 0 01-.018-.2v-.02a1.772 1.772 0 01.15-.768c.082-.22.232-.406.43-.533a.985.985 0 01.594-.2zm-2.962.059h.036c.142 0 .27.048.399.135.146.129.264.288.344.465.09.199.14.4.153.667v.004c.007.134.006.2-.002.266v.08c-.03.007-.056.018-.083.024-.152.055-.274.135-.393.2.012-.09.013-.18.003-.267v-.015c-.012-.133-.04-.2-.082-.333a.613.613 0 00-.166-.267.248.248 0 00-.183-.064h-.021c-.071.006-.13.04-.186.132a.552.552 0 00-.12.27.944.944 0 00-.023.33v.015c.012.135.037.2.08.334.046.134.098.2.166.268.01.009.02.018.034.024-.07.057-.117.07-.176.136a.304.304 0 01-.131.068 2.62 2.62 0 01-.275-.402 1.772 1.772 0 01-.155-.667 1.759 1.759 0 01.08-.668 1.43 1.43 0 01.283-.535c.128-.133.26-.2.418-.2zm1.37 1.706c.332 0 .733.065 1.216.399.293.2.523.269 1.052.468h.003c.255.136.405.266.478.399v-.131a.571.571 0 01.016.47c-.123.31-.516.643-1.063.842v.002c-.268.135-.501.333-.775.465-.276.135-.588.292-1.012.267a1.139 1.139 0 01-.448-.067 3.566 3.566 0 01-.322-.198c-.195-.135-.363-.332-.612-.465v-.005h-.005c-.4-.246-.616-.512-.686-.71-.07-.268-.005-.47.193-.6.224-.135.38-.271.483-.336.104-.074.143-.102.176-.131h.002v-.003c.169-.202.436-.47.839-.601.139-.036.294-.065.466-.065zm2.8 2.142c.358 1.417 1.196 3.475 1.735 4.473.286.534.855 1.659 1.102 3.024.156-.005.33.018.513.064.646-1.671-.546-3.467-1.089-3.966-.22-.2-.232-.335-.123-.335.59.534 1.365 1.572 1.646 2.757.13.535.16 1.104.021 1.67.067.028.135.06.205.067 1.032.534 1.413.938 1.23 1.537v-.043c-.06-.003-.12 0-.18 0h-.016c.151-.467-.182-.825-1.065-1.224-.915-.4-1.646-.336-1.77.465-.008.043-.013.066-.018.135-.068.023-.139.053-.209.064-.43.268-.662.669-.793 1.187-.13.533-.17 1.156-.205 1.869v.003c-.02.334-.17.838-.319 1.35-1.5 1.072-3.58 1.538-5.348.334a2.645 2.645 0 00-.402-.533 1.45 1.45 0 00-.275-.333c.182 0 .338-.03.465-.067a.615.615 0 00.314-.334c.108-.267 0-.697-.345-1.163-.345-.467-.931-.995-1.788-1.521-.63-.4-.986-.87-1.15-1.396-.165-.534-.143-1.085-.015-1.645.245-1.07.873-2.11 1.274-2.763.107-.065.037.135-.408.974-.396.751-1.14 2.497-.122 3.854a8.123 8.123 0 01.647-2.876c.564-1.278 1.743-3.504 1.836-5.268.048.036.217.135.289.202.218.133.38.333.59.465.21.201.477.335.876.335.039.003.075.006.11.006.412 0 .73-.134.997-.268.29-.134.52-.334.74-.4h.005c.467-.135.835-.402 1.044-.7zm2.185 8.958c.037.6.343 1.245.882 1.377.588.134 1.434-.333 1.791-.765l.211-.01c.315-.007.577.01.847.268l.003.003c.208.199.305.53.391.876.085.4.154.78.409 1.066.486.527.645.906.636 1.14l.003-.007v.018l-.003-.012c-.015.262-.185.396-.498.595-.63.401-1.746.712-2.457 1.57-.618.737-1.37 1.14-2.036 1.191-.664.053-1.237-.2-1.574-.898l-.005-.003c-.21-.4-.12-1.025.056-1.69.176-.668.428-1.344.463-1.897.037-.714.076-1.335.195-1.814.12-.465.308-.797.641-.984l.045-.022zm-10.814.049h.01c.053 0 .105.005.157.014.376.055.706.333 1.023.752l.91 1.664.003.003c.243.533.754 1.064 1.189 1.637.434.598.77 1.131.729 1.57v.006c-.057.744-.48 1.148-1.125 1.294-.645.135-1.52.002-2.395-.464-.968-.536-2.118-.469-2.857-.602-.369-.066-.61-.2-.723-.4-.11-.2-.113-.602.123-1.23v-.004l.002-.003c.117-.334.03-.752-.027-1.118-.055-.401-.083-.71.043-.94.16-.334.396-.4.69-.533.294-.135.64-.202.915-.47h.002v-.002c.256-.268.445-.601.668-.838.19-.201.38-.336.663-.336zm7.159-9.074c-.435.201-.945.535-1.488.535-.542 0-.97-.267-1.28-.466-.154-.134-.28-.268-.373-.335-.164-.134-.144-.333-.074-.333.109.016.129.134.199.2.096.066.215.2.36.333.292.2.68.467 1.167.467.485 0 1.053-.267 1.398-.466.195-.135.445-.334.648-.467.156-.136.149-.267.279-.267.128.016.034.134-.147.332a8.097 8.097 0 01-.69.468zm-1.082-1.583V5.64c-.006-.02.013-.042.029-.05.074-.043.18-.027.26.004.063 0 .16.067.15.135-.006.049-.085.066-.135.066-.055 0-.092-.043-.141-.068-.052-.018-.146-.008-.163-.065zm-.551 0c-.02.058-.113.049-.166.066-.047.025-.086.068-.14.068-.05 0-.13-.02-.136-.068-.01-.066.088-.133.15-.133.08-.031.184-.047.259-.005.019.009.036.03.03.05v.02h.003z"/>
                </svg>
                <span class="os-label">Linux</span>
              </button>
              <button class="os-option" data-os="windows">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 4H11.5V11.5H4V4ZM12.5 4H20V11.5H12.5V4ZM4 12.5H11.5V20H4V12.5ZM12.5 12.5H20V20H12.5V12.5Z"/>
                </svg>
                <span class="os-label">Windows</span>
              </button>
            </div>

            <!-- Docs Link -->
            <a href="/getting-started" class="docs-link">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="2" width="10" height="12" rx="1"/>
                <line x1="6" y1="5" x2="10" y2="5"/>
                <line x1="6" y1="8" x2="10" y2="8"/>
                <line x1="6" y1="11" x2="10" y2="11"/>
              </svg>
              <span>View Docs</span>
            </a>
          </div>

          <!-- Install Command -->
          <div class="install-command" id="installCommand">
            <code class="command-text" id="commandText">curl -sSL promptext.sh/install | bash</code>
            <button class="copy-btn" id="copyBtn" title="Copy to clipboard">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="4" y="4" width="8" height="10" rx="1"/>
                <path d="M8 4V2a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-2"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="terminal-window">
        <div class="terminal-header">
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
          <div class="terminal-dot"></div>
        </div>
        <div class="terminal-body" id="terminal"></div>
      </div>
    </div>
  </section>

  <section class="features">
    <h2 class="section-title">Built for efficiency</h2>
    <div class="feature-grid">
      {features.map(feature => (
        <div class="feature-card">
          <h3>{feature.title}</h3>
          <p>{feature.description}</p>
        </div>
      ))}
    </div>
  </section>

  <footer>
    <p>
      Built with <a href="https://astro.build" target="_blank">Astro</a> ¬∑
      Open source on <a href="https://github.com/1broseidon/promptext" target="_blank">GitHub</a>
    </p>
  </footer>

  <script>
    // Theme toggle
    const themeToggle = document.getElementById('themeToggle');
    const html = document.documentElement;

    themeToggle?.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('theme') || 'dark';
    html.setAttribute('data-theme', savedTheme);

    // OS Detection and Install Command
    function detectOS() {
      const userAgent = window.navigator.userAgent.toLowerCase();
      const platform = window.navigator.platform.toLowerCase();

      if (platform.includes('mac') || userAgent.includes('mac')) {
        return 'mac';
      } else if (platform.includes('win') || userAgent.includes('win')) {
        return 'windows';
      } else if (platform.includes('linux') || userAgent.includes('linux')) {
        return 'linux';
      }
      return 'linux'; // Default to linux
    }

    // OS configuration
    const osConfig = {
      mac: {
        command: 'brew tap 1broseidon/tap && brew install promptext',
        name: 'macOS'
      },
      windows: {
        command: 'irm promptext.sh/install.ps1 | iex',
        name: 'Windows'
      },
      linux: {
        command: 'curl -sSL promptext.sh/install | bash',
        name: 'Linux'
      }
    };

    // Get elements
    const commandText = document.getElementById('commandText');
    const osSelector = document.getElementById('osSelector');
    const osSelectorBg = document.getElementById('osSelectorBg');
    const osOptions = document.querySelectorAll('.os-option');

    // Detect current OS
    const detectedOS = detectOS();
    let currentOS = detectedOS;

    // Update command and visual state
    function updateOS(osKey) {
      const config = osConfig[osKey];
      if (!config) return;

      // Update command text
      if (commandText) {
        commandText.textContent = config.command;
      }

      // Update active button
      osOptions.forEach(btn => {
        if (btn.dataset.os === osKey) {
          btn.classList.add('active');
        } else {
          btn.classList.remove('active');
        }
      });

      // Update background slider position
      updateSelectorBackground(osKey);

      currentOS = osKey;
    }

    // Update the background slider position
    function updateSelectorBackground(osKey) {
      if (!osSelectorBg) return;

      const activeBtn = document.querySelector(`.os-option[data-os="${osKey}"]`);
      if (activeBtn) {
        const btnRect = activeBtn.getBoundingClientRect();
        const selectorRect = osSelector.getBoundingClientRect();
        const left = btnRect.left - selectorRect.left;
        const width = btnRect.width;

        osSelectorBg.style.left = `${left}px`;
        osSelectorBg.style.width = `${width}px`;
      }
    }

    // Set up click handlers for OS buttons
    osOptions.forEach(btn => {
      btn.addEventListener('click', () => {
        const os = btn.dataset.os;
        if (os) {
          updateOS(os);
        }
      });
    });

    // Initialize with detected OS
    updateOS(currentOS);

    // Copy to clipboard functionality
    const copyBtn = document.getElementById('copyBtn');
    copyBtn?.addEventListener('click', async () => {
      const command = commandText?.textContent || '';

      try {
        await navigator.clipboard.writeText(command);
        copyBtn.classList.add('copied');
        copyBtn.innerHTML = `
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 8l3 3 7-7"/>
          </svg>
        `;

        setTimeout(() => {
          copyBtn.classList.remove('copied');
          copyBtn.innerHTML = `
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="4" y="4" width="8" height="10" rx="1"/>
              <path d="M8 4V2a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-2"/>
            </svg>
          `;
        }, 2000);
      } catch (err) {
        console.error('Failed to copy:', err);
      }
    });

    // Terminal animation
    const terminal = document.getElementById('terminal');
    let currentDir = '~';
    const commands = [
      {
        type: 'command',
        text: 'cd projects/myapp',
        delay: 0,
        dir: '~'
      },
      {
        type: 'command',
        text: 'prx -r "auth login" --max-tokens 8000',
        delay: 400,
        dir: '~/projects/myapp'
      },
      {
        type: 'output',
        lines: [
          '',
          'üì¶ myapp (Go)',
          '   Included: 7/18 files ‚Ä¢ ~4,847 tokens',
          '   Full project: 18 files ‚Ä¢ ~19,512 tokens'
        ],
        delay: 600,
        success: true
      },
      {
        type: 'output',
        lines: [
          '',
          '‚ö†Ô∏è  Excluded 11 files due to token budget:',
          '    ‚Ä¢ internal/cli/commands.go (~784 tokens)',
          '    ‚Ä¢ internal/app/app.go (~623 tokens)',
          '    ‚Ä¢ internal/token/counter.go (~541 tokens)',
          '    ... and 8 more files (~7,349 tokens)',
          '    Total excluded: ~9,297 tokens',
          '',
          '‚úì Copied to clipboard!'
        ],
        delay: 800,
        warning: true
      }
    ];

    async function typeWriter(element, text, speed = 20) {
      for (let i = 0; i < text.length; i++) {
        element.textContent += text.charAt(i);
        await new Promise(resolve => setTimeout(resolve, speed));
      }
    }

    async function runTerminalAnimation() {
      for (const cmd of commands) {
        await new Promise(resolve => setTimeout(resolve, cmd.delay));

        if (cmd.type === 'command') {
          const line = document.createElement('div');
          line.className = 'terminal-line';
          const prompt = document.createElement('span');
          prompt.className = 'prompt';
          const dir = cmd.dir || currentDir;
          prompt.textContent = `${dir} $ `;
          const command = document.createElement('span');
          line.appendChild(prompt);
          line.appendChild(command);
          terminal?.appendChild(line);

          await typeWriter(command, cmd.text, 25);

          // Update current directory if it's a cd command
          if (cmd.text.startsWith('cd ')) {
            const newPath = cmd.text.substring(3);
            if (newPath.startsWith('/')) {
              currentDir = newPath;
            } else if (newPath === '..') {
              const parts = currentDir.split('/');
              parts.pop();
              currentDir = parts.join('/') || '~';
            } else {
              currentDir = currentDir === '~' ? `~/${newPath}` : `${currentDir}/${newPath}`;
            }
          }
        } else if (cmd.type === 'box') {
          // Create boxed output with borders - use fixed width approach
          const box = document.createElement('div');
          box.className = 'terminal-box';

          // Fixed width for consistency (matches longest line)
          const boxWidth = 46;

          // Top border
          const topBorder = document.createElement('div');
          topBorder.className = 'terminal-box-top';
          topBorder.textContent = '‚ï≠' + '‚îÄ'.repeat(boxWidth) + '‚ïÆ';
          box.appendChild(topBorder);

          // Content lines - use fixed width with proper padding
          cmd.lines.forEach(line => {
            const lineDiv = document.createElement('div');
            lineDiv.className = 'terminal-box-line';

            const leftBorder = document.createElement('span');
            leftBorder.className = 'terminal-box-border';
            leftBorder.textContent = '‚îÇ ';

            const content = document.createElement('span');
            content.className = 'terminal-box-content';

            // Calculate visual length accounting for emojis
            let visualLength = 0;
            for (const char of line) {
              const code = char.codePointAt(0);
              // Emoji range check
              if ((code >= 0x1F300 && code <= 0x1F9FF) ||
                  (code >= 0x2600 && code <= 0x26FF) ||
                  (code >= 0x2700 && code <= 0x27BF)) {
                visualLength += 2; // Emojis take 2 spaces in monospace
              } else {
                visualLength += 1;
              }
            }

            // Pad to fixed width
            const paddingNeeded = boxWidth - visualLength;
            content.textContent = line + ' '.repeat(Math.max(0, paddingNeeded));

            const rightBorder = document.createElement('span');
            rightBorder.className = 'terminal-box-border';
            rightBorder.textContent = ' ‚îÇ';

            lineDiv.appendChild(leftBorder);
            lineDiv.appendChild(content);
            lineDiv.appendChild(rightBorder);
            box.appendChild(lineDiv);
          });

          // Bottom border
          const bottomBorder = document.createElement('div');
          bottomBorder.className = 'terminal-box-bottom';
          bottomBorder.textContent = '‚ï∞' + '‚îÄ'.repeat(boxWidth) + '‚ïØ';
          box.appendChild(bottomBorder);

          terminal?.appendChild(box);
        } else if (cmd.type === 'output') {
          const output = document.createElement('div');
          output.className = cmd.success ? 'output success' : cmd.warning ? 'output warning' : 'output';

          // Add each line separately to preserve line breaks
          cmd.lines.forEach((line, index) => {
            const lineDiv = document.createElement('div');
            lineDiv.textContent = line || '\u00A0'; // Use non-breaking space for empty lines
            output.appendChild(lineDiv);
          });

          terminal?.appendChild(output);
        }
      }

      // Animation complete - no final cursor line to save space
    }

    // Start animation when page loads
    runTerminalAnimation();
  </script>
</body>
</html>
