const b=document.getElementById("themeToggle"),x=document.documentElement;b?.addEventListener("click",()=>{const e=x.getAttribute("data-theme")==="dark"?"light":"dark";x.setAttribute("data-theme",e),localStorage.setItem("theme",e)});const k=localStorage.getItem("theme")||"dark";x.setAttribute("data-theme",k);function B(){const t=window.navigator.userAgent.toLowerCase(),e=window.navigator.platform.toLowerCase();return e.includes("mac")||t.includes("mac")?"mac":e.includes("win")||t.includes("win")?"windows":(e.includes("linux")||t.includes("linux"),"linux")}const T={mac:{command:"brew tap 1broseidon/tap && brew install promptext",name:"macOS"},windows:{command:"irm promptext.sh/install.ps1 | iex",name:"Windows"},linux:{command:"curl -sSL promptext.sh/install | bash",name:"Linux"}},f=document.getElementById("commandText"),S=document.getElementById("osSelector"),h=document.getElementById("osSelectorBg"),w=document.querySelectorAll(".os-option"),L=B();let y=L;function C(t){const e=T[t];e&&(f&&(f.textContent=e.command),w.forEach(n=>{n.dataset.os===t?n.classList.add("active"):n.classList.remove("active")}),N(t),y=t)}function N(t){if(!h)return;const e=document.querySelector(`.os-option[data-os="${t}"]`);if(e){const n=e.getBoundingClientRect(),c=S.getBoundingClientRect(),o=n.left-c.left,a=n.width;h.style.left=`${o}px`,h.style.width=`${a}px`}}w.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.os;e&&C(e)})});C(y);const r=document.getElementById("copyBtn");r?.addEventListener("click",async()=>{const t=f?.textContent||"";try{await navigator.clipboard.writeText(t),r.classList.add("copied"),r.innerHTML=`
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 8l3 3 7-7"/>
          </svg>
        `,setTimeout(()=>{r.classList.remove("copied"),r.innerHTML=`
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="4" y="4" width="8" height="10" rx="1"/>
              <path d="M8 4V2a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-2"/>
            </svg>
          `},2e3)}catch(e){console.error("Failed to copy:",e)}});const g=document.getElementById("terminal");let i="~";const A=[{type:"command",text:"cd projects/myapp",delay:0,dir:"~"},{type:"command",text:'prx -r "auth login" --max-tokens 8000',delay:400,dir:"~/projects/myapp"},{type:"output",lines:["","üì¶ myapp (Go)","   Included: 7/18 files ‚Ä¢ ~4,847 tokens","   Full project: 18 files ‚Ä¢ ~19,512 tokens"],delay:600,success:!0},{type:"output",lines:["","‚ö†Ô∏è  Excluded 11 files due to token budget:","    ‚Ä¢ internal/cli/commands.go (~784 tokens)","    ‚Ä¢ internal/app/app.go (~623 tokens)","    ‚Ä¢ internal/token/counter.go (~541 tokens)","    ... and 8 more files (~7,349 tokens)","    Total excluded: ~9,297 tokens","","‚úì Copied to clipboard!"],delay:800,warning:!0}];async function I(t,e,n=20){for(let c=0;c<e.length;c++)t.textContent+=e.charAt(c),await new Promise(o=>setTimeout(o,n))}async function $(){for(const t of A)if(await new Promise(e=>setTimeout(e,t.delay)),t.type==="command"){const e=document.createElement("div");e.className="terminal-line";const n=document.createElement("span");n.className="prompt";const c=t.dir||i;n.textContent=`${c} $ `;const o=document.createElement("span");if(e.appendChild(n),e.appendChild(o),g?.appendChild(e),await I(o,t.text,25),t.text.startsWith("cd ")){const a=t.text.substring(3);if(a.startsWith("/"))i=a;else if(a===".."){const s=i.split("/");s.pop(),i=s.join("/")||"~"}else i=i==="~"?`~/${a}`:`${i}/${a}`}}else if(t.type==="box"){const e=document.createElement("div");e.className="terminal-box";const n=46,c=document.createElement("div");c.className="terminal-box-top",c.textContent="‚ï≠"+"‚îÄ".repeat(n)+"‚ïÆ",e.appendChild(c),t.lines.forEach(a=>{const s=document.createElement("div");s.className="terminal-box-line";const l=document.createElement("span");l.className="terminal-box-border",l.textContent="‚îÇ ";const m=document.createElement("span");m.className="terminal-box-content";let p=0;for(const E of a){const d=E.codePointAt(0);d>=127744&&d<=129535||d>=9728&&d<=9983||d>=9984&&d<=10175?p+=2:p+=1}const v=n-p;m.textContent=a+" ".repeat(Math.max(0,v));const u=document.createElement("span");u.className="terminal-box-border",u.textContent=" ‚îÇ",s.appendChild(l),s.appendChild(m),s.appendChild(u),e.appendChild(s)});const o=document.createElement("div");o.className="terminal-box-bottom",o.textContent="‚ï∞"+"‚îÄ".repeat(n)+"‚ïØ",e.appendChild(o),g?.appendChild(e)}else if(t.type==="output"){const e=document.createElement("div");e.className=t.success?"output success":t.warning?"output warning":"output",t.lines.forEach((n,c)=>{const o=document.createElement("div");o.textContent=n||"¬†",e.appendChild(o)}),g?.appendChild(e)}}$();
