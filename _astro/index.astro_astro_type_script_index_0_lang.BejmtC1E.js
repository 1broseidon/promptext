const x=document.getElementById("themeToggle"),f=document.documentElement;function w(t){const e=x?.querySelector(".sun-icon"),n=x?.querySelector(".moon-icon");t==="dark"?(e.style.display="block",n.style.display="none"):(e.style.display="none",n.style.display="block")}x?.addEventListener("click",()=>{const e=f.getAttribute("data-theme")==="dark"?"light":"dark";f.setAttribute("data-theme",e),localStorage.setItem("theme",e),w(e)});const C=localStorage.getItem("theme")||"dark";f.setAttribute("data-theme",C);w(C);function S(){const t=window.navigator.userAgent.toLowerCase(),e=window.navigator.platform.toLowerCase();return e.includes("mac")||t.includes("mac")?"mac":e.includes("win")||t.includes("win")?"windows":(e.includes("linux")||t.includes("linux"),"linux")}const T={mac:{command:"curl -sSL promptext.sh/install | bash",name:"macOS"},windows:{command:"irm promptext.sh/install.ps1 | iex",name:"Windows"},linux:{command:"curl -sSL promptext.sh/install | bash",name:"Linux"}},y=document.getElementById("commandText"),L=document.getElementById("osSelector"),h=document.getElementById("osSelectorBg"),v=document.querySelectorAll(".os-option"),I=S();let E=I;function k(t){const e=T[t];e&&(y&&(y.textContent=e.command),v.forEach(n=>{n.dataset.os===t?n.classList.add("active"):n.classList.remove("active")}),N(t),E=t)}function N(t){if(!h)return;const e=document.querySelector(`.os-option[data-os="${t}"]`);if(e){const n=e.getBoundingClientRect(),c=L.getBoundingClientRect(),o=n.left-c.left,s=n.width;h.style.left=`${o}px`,h.style.width=`${s}px`}}v.forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.os;e&&k(e)})});k(E);const d=document.getElementById("copyBtn");d?.addEventListener("click",async()=>{const t=y?.textContent||"";try{await navigator.clipboard.writeText(t),d.classList.add("copied"),d.innerHTML=`
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 8l3 3 7-7"/>
          </svg>
        `,setTimeout(()=>{d.classList.remove("copied"),d.innerHTML=`
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="4" y="4" width="8" height="10" rx="1"/>
              <path d="M8 4V2a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-2"/>
            </svg>
          `},2e3)}catch(e){console.error("Failed to copy:",e)}});const g=document.getElementById("terminal");let i="~";const A=[{type:"command",text:"cd projects/myapp",delay:0,dir:"~"},{type:"command",text:'prx -r "auth login" --max-tokens 8000',delay:400,dir:"~/projects/myapp"},{type:"output",lines:["","üì¶ myapp (Go)","   Included: 7/18 files ‚Ä¢ ~4,847 tokens","   Full project: 18 files ‚Ä¢ ~19,512 tokens"],delay:600,success:!0},{type:"output",lines:["","‚ö†Ô∏è  Excluded 11 files due to token budget:","    ‚Ä¢ internal/cli/commands.go (~784 tokens)","    ‚Ä¢ internal/app/app.go (~623 tokens)","    ‚Ä¢ internal/token/counter.go (~541 tokens)","    ... and 8 more files (~7,349 tokens)","    Total excluded: ~9,297 tokens","","‚úì Copied to clipboard!"],delay:800,warning:!0}];async function $(t,e,n=20){for(let c=0;c<e.length;c++)t.textContent+=e.charAt(c),await new Promise(o=>setTimeout(o,n))}async function O(){for(const t of A)if(await new Promise(e=>setTimeout(e,t.delay)),t.type==="command"){const e=document.createElement("div");e.className="terminal-line";const n=document.createElement("span");n.className="prompt";const c=t.dir||i;n.textContent=`${c} $ `;const o=document.createElement("span");if(e.appendChild(n),e.appendChild(o),g?.appendChild(e),await $(o,t.text,25),t.text.startsWith("cd ")){const s=t.text.substring(3);if(s.startsWith("/"))i=s;else if(s===".."){const a=i.split("/");a.pop(),i=a.join("/")||"~"}else i=i==="~"?`~/${s}`:`${i}/${s}`}}else if(t.type==="box"){const e=document.createElement("div");e.className="terminal-box";const n=46,c=document.createElement("div");c.className="terminal-box-top",c.textContent="‚ï≠"+"‚îÄ".repeat(n)+"‚ïÆ",e.appendChild(c),t.lines.forEach(s=>{const a=document.createElement("div");a.className="terminal-box-line";const r=document.createElement("span");r.className="terminal-box-border",r.textContent="‚îÇ ";const m=document.createElement("span");m.className="terminal-box-content";let u=0;for(const B of s){const l=B.codePointAt(0);l>=127744&&l<=129535||l>=9728&&l<=9983||l>=9984&&l<=10175?u+=2:u+=1}const b=n-u;m.textContent=s+" ".repeat(Math.max(0,b));const p=document.createElement("span");p.className="terminal-box-border",p.textContent=" ‚îÇ",a.appendChild(r),a.appendChild(m),a.appendChild(p),e.appendChild(a)});const o=document.createElement("div");o.className="terminal-box-bottom",o.textContent="‚ï∞"+"‚îÄ".repeat(n)+"‚ïØ",e.appendChild(o),g?.appendChild(e)}else if(t.type==="output"){const e=document.createElement("div");e.className=t.success?"output success":t.warning?"output warning":"output",t.lines.forEach((n,c)=>{const o=document.createElement("div");o.textContent=n||"¬†",e.appendChild(o)}),g?.appendChild(e)}}O();
